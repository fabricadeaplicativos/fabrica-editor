define("text",["module"],function(e){var t,n,r,o,i,s=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],a=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,l=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,c="undefined"!=typeof location&&location.href,d=c&&location.protocol&&location.protocol.replace(/\:/,""),u=c&&location.hostname,f=c&&(location.port||void 0),p={},g=e.config&&e.config()||{};return t={version:"2.0.10",strip:function(e){if(e){e=e.replace(a,"");var t=e.match(l);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:g.createXhr||function(){var e,t,n;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(t=0;3>t;t+=1){n=s[t];try{e=new ActiveXObject(n)}catch(r){}if(e){s=[n];break}}return e},parseName:function(e){var t,n,r,o=!1,i=e.indexOf("."),s=0===e.indexOf("./")||0===e.indexOf("../");return-1!==i&&(!s||i>1)?(t=e.substring(0,i),n=e.substring(i+1,e.length)):t=e,r=n||t,i=r.indexOf("!"),-1!==i&&(o="strip"===r.substring(i+1),r=r.substring(0,i),n?n=r:t=r),{moduleName:t,ext:n,strip:o}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,n,r,o){var i,s,a,l=t.xdRegExp.exec(e);return l?(i=l[2],s=l[3],s=s.split(":"),a=s[1],s=s[0],!(i&&i!==n||s&&s.toLowerCase()!==r.toLowerCase()||(a||s)&&a!==o)):!0},finishLoad:function(e,n,r,o){r=n?t.strip(r):r,g.isBuild&&(p[e]=r),o(r)},load:function(e,n,r,o){if(o.isBuild&&!o.inlineText)return void r();g.isBuild=o.isBuild;var i=t.parseName(e),s=i.moduleName+(i.ext?"."+i.ext:""),a=n.toUrl(s),l=g.useXhr||t.useXhr;return 0===a.indexOf("empty:")?void r():void(!c||l(a,d,u,f)?t.get(a,function(n){t.finishLoad(e,i.strip,n,r)},function(e){r.error&&r.error(e)}):n([s],function(e){t.finishLoad(i.moduleName+"."+i.ext,i.strip,e,r)}))},write:function(e,n,r){if(p.hasOwnProperty(n)){var o=t.jsEscape(p[n]);r.asModule(e+"!"+n,"define(function () { return '"+o+"';});\n")}},writeFile:function(e,n,r,o,i){var s=t.parseName(n),a=s.ext?"."+s.ext:"",l=s.moduleName+a,c=r.toUrl(s.moduleName+a)+".js";t.load(l,r,function(){var n=function(e){return o(c,e)};n.asModule=function(e,t){return o.asModule(e,c,t)},t.write(e,l,n,i)},i)}},"node"===g.env||!g.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]?(n=require.nodeRequire("fs"),t.get=function(e,t,r){try{var o=n.readFileSync(e,"utf8");0===o.indexOf("ï»¿")&&(o=o.substring(1)),t(o)}catch(i){r(i)}}):"xhr"===g.env||!g.env&&t.createXhr()?t.get=function(e,n,r,o){var i,s=t.createXhr();if(s.open("GET",e,!0),o)for(i in o)o.hasOwnProperty(i)&&s.setRequestHeader(i.toLowerCase(),o[i]);g.onXhr&&g.onXhr(s,e),s.onreadystatechange=function(){var t,o;4===s.readyState&&(t=s.status,t>399&&600>t?(o=new Error(e+" HTTP status: "+t),o.xhr=s,r(o)):n(s.responseText),g.onXhrComplete&&g.onXhrComplete(s,e))},s.send(null)}:"rhino"===g.env||!g.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?t.get=function(e,t){var n,r,o="utf-8",i=new java.io.File(e),s=java.lang.System.getProperty("line.separator"),a=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(i),o)),l="";try{for(n=new java.lang.StringBuffer,r=a.readLine(),r&&r.length()&&65279===r.charAt(0)&&(r=r.substring(1)),null!==r&&n.append(r);null!==(r=a.readLine());)n.append(s),n.append(r);l=String(n.toString())}finally{a.close()}t(l)}:("xpconnect"===g.env||!g.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(r=Components.classes,o=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),i="@mozilla.org/windows-registry-key;1"in r,t.get=function(e,t){var n,s,a,l={};i&&(e=e.replace(/\//g,"\\")),a=new FileUtils.File(e);try{n=r["@mozilla.org/network/file-input-stream;1"].createInstance(o.nsIFileInputStream),n.init(a,1,0,!1),s=r["@mozilla.org/intl/converter-input-stream;1"].createInstance(o.nsIConverterInputStream),s.init(n,"utf-8",n.available(),o.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),s.readString(n.available(),l),s.close(),n.close(),t(l.value)}catch(c){throw new Error((a&&a.path||"")+": "+c)}}),t}),define("text!htmlContent/projects-menu.html",[],function(){return'<ul id="project-dropdown" class="dropdown-menu" tabindex="-1">\n    <li><a id="open-folder-link">{{Strings.CMD_OPEN_FOLDER}}</a></li>\n    \n    {{#projectList.length}}\n    <li class="divider"></li>\n    {{/projectList.length}}\n    \n    {{#projectList}}\n    <li>\n        <a class="recent-folder-link" data-path="{{path}}">\n            <span class="recent-folder">{{folder}}</span>\n            <span class="recent-folder-path">{{rest}}</span>\n        </a>\n    </li>\n    {{/projectList}}\n</ul>\n'}),define("text!keyboard.json",[],function(){return'{\n    "recentProjects": [\n        {\n            "key": "Ctrl-Alt-R"\n        }\n    ]\n}'}),define("main",["require","exports","module","text!htmlContent/projects-menu.html","text!keyboard.json"],function(e,t,n){function r(){var e,t=y.getViewState("recentProjects")||[];for(e=0;e<t.length;e++)t[e]=X.stripTrailingSlash(x.updateWelcomeProjectPath(t[e]+"/"));return t}function o(){var e=X.stripTrailingSlash(x.getProjectRoot().fullPath),t=r(),n=t.indexOf(e);-1!==n&&t.splice(n,1),t.unshift(e),t.length>V&&(t=t.slice(0,V)),y.setViewState("recentProjects",t)}function i(e,t){M.children().each(function(){var n=$(this).offset(),r=$(this).outerWidth(),o=$(this).outerHeight();e>=n.left&&e<=n.left+r&&t>=n.top&&t<=n.top+o&&$(".recent-folder-link",this).triggerHandler("mouseenter")})}function s(){return $("<div id='recent-folder-delete' class='trash-icon'>&times;</div>").mouseup(function(e){e.stopPropagation();var t,n=r(),o=n.indexOf($(this).parent().data("path")),s=[];for(t=0;t<n.length;t++)t!==o&&s.push(n[t]);y.setViewState("recentProjects",s),$(this).closest("li").remove(),i(e.pageX,e.pageY),1===s.length&&M.find(".divider").remove()})}function a(){$("#recent-folder-delete").remove()}function l(e){a(),s().css("top",e.position().top+6).appendTo(e)}function c(e){var t=M.find("a"),n=j?t.index(j):e>0?-1:0,r=t.eq((n+e)%t.length);j&&j.removeClass("selected"),r.addClass("selected"),j=r,a()}function d(e){var t=r(),n=j,o=t.indexOf(n.data("path"));return-1===o?!1:(t.splice(o,1),y.setViewState("recentProjects",t),i(e.pageX,e.pageY),1===t.length&&M.find(".divider").remove(),c(1),n.closest("li").remove(),!0)}function u(e){var t=!1;switch(e.keyCode){case _.DOM_VK_UP:c(-1),t=!0;break;case _.DOM_VK_DOWN:c(1),t=!0;break;case _.DOM_VK_ENTER:case _.DOM_VK_RETURN:j&&j.trigger("click"),t=!0;break;case _.DOM_VK_BACK_SPACE:case _.DOM_VK_DELETE:j&&(d(e),t=!0)}return t&&(e.stopImmediatePropagation(),e.preventDefault()),t}function f(){M&&N.removePopUp(M)}function p(){$("html").off("click",f),$("#project-files-container").off("scroll",f),$(k).off("hide",f),$("#titlebar .nav").off("click",f),M=null,S.focusActivePane(),$(window).off("keydown",u)}function g(){M.on("click","a",function(){var e=$(this),t=e.attr("id"),n=e.data("path");n?(x.openProject(n).fail(function(){var e=r(),t=e.indexOf(n);-1!==t&&L.resolve(n,function(n){n&&e.splice(t,1)})}),f()):"open-folder-link"===t&&P.execute(C.FILE_OPEN_FOLDER)}).on("mouseenter","a",function(){j&&j.removeClass("selected"),j=$(this).addClass("selected"),j.hasClass("recent-folder-link")&&l($(this))}).on("mouseleave","a",function(){var e=$(this).removeClass("selected");e.get(0)===j.get(0)&&(j=null),e.hasClass("recent-folder-link")&&a()})}function h(e){var t,n,r=e.lastIndexOf("/");return r===e.length-1&&(r=e.slice(0,e.length-1).lastIndexOf("/")),r>=0?(n=" - "+(r?e.slice(0,r):"/"),t=e.slice(r+1)):(n="/",t=e),{path:e,folder:t,rest:n}}function m(){var e=r(),t=X.stripTrailingSlash(x.getProjectRoot().fullPath),n={projectList:[],Strings:I};return e.forEach(function(e){e!==t&&n.projectList.push(h(e))}),Mustache.render(D,n)}function v(e){M||(E.closeAll(),M=$(m()).css({left:e.pageX,top:e.pageY}).appendTo($("body")),N.addPopUp(M,p,!0),$("html").on("click",f),$("#project-files-container").on("scroll",f),$(k).on("hide",f),$("#titlebar .nav").on("click",f),g(),$(window).on("keydown",u))}function w(){M||(k.isVisible()||k.show(),$("#project-dropdown-toggle").trigger("click"),M.focus(),b=M.find("a"),j=b.eq(b.length>1?1:0),j.addClass("selected"),window.setTimeout(function(){M.focus()},0))}var j,M,b,x=brackets.getModule("project/ProjectManager"),k=brackets.getModule("project/SidebarView"),y=brackets.getModule("preferences/PreferencesManager"),C=brackets.getModule("command/Commands"),P=brackets.getModule("command/CommandManager"),O=brackets.getModule("command/KeyBindingManager"),E=brackets.getModule("command/Menus"),S=brackets.getModule("view/MainViewManager"),T=brackets.getModule("utils/ExtensionUtils"),L=brackets.getModule("filesystem/FileSystem"),R=brackets.getModule("utils/AppInit"),_=brackets.getModule("utils/KeyEvent"),X=brackets.getModule("file/FileUtils"),N=brackets.getModule("widgets/PopUpManager"),I=brackets.getModule("strings"),D=e("text!htmlContent/projects-menu.html"),F=JSON.parse(e("text!keyboard.json")),A="recentProjects.toggle",V=20;y.convertPreferences(n,{recentProjects:"user"},!0),P.register(I.CMD_TOGGLE_RECENT_PROJECTS,A,w),O.addBinding(A,F.recentProjects),R.appReady(function(){T.loadStyleSheet(n,"styles/styles.less"),$(x).on("projectOpen",o),$(x).on("beforeProjectClose",o)}),R.htmlReady(function(){$("#project-title").wrap("<div id='project-dropdown-toggle' class='btn-alt-quiet'></div>").after("<span class='dropdown-arrow'></span>");var e={open:v,close:f,isOpen:function(){return!!M}};E.ContextMenu.assignContextMenuToSelector("#project-dropdown-toggle",e)})});