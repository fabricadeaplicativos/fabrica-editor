define("main",["require","exports","module"],function(e,n){function t(e,n){var t=e._codeMirror.getTokenAt(n,!0);return/\S/.test(t.string)&&"."!==t.string||(t=e._codeMirror.getTokenAt({line:n.line,ch:n.ch+1},!0)),"variable"!==t.type&&"variable-2"!==t.type&&"property"!==t.type?{functionName:null,reason:I.ERROR_JSQUICKEDIT_FUNCTIONNOTFOUND}:{functionName:t.string,reason:null}}function r(e){function n(e){return!c.getLanguageForPath(e.fullPath).isBinary()}var t=new $.Deferred;return s.markStart(s.JAVASCRIPT_FIND_FUNCTION),d.getAllFiles(n).done(function(n){u.findMatchingFunctions(e,n).done(function(e){s.addMeasurement(s.JAVASCRIPT_FIND_FUNCTION),t.resolve(e)}).fail(function(){s.finalizeMeasurement(s.JAVASCRIPT_FIND_FUNCTION),t.reject()})}).fail(function(){t.reject()}),t.promise()}function a(e,n){var t=brackets._jsCodeHintsHelper;if(null===t)return null;var a=new $.Deferred;s.markStart(s.JAVASCRIPT_INLINE_CREATE);var i=t();return i.hasOwnProperty("promise")&&i.promise.done(function(t){var i=t.fullPath;if(i){var l=[];l.push({name:t.resultFile,fullPath:i}),u.findMatchingFunctions(n,l,!0).done(function(n){if(n&&n.length>0){var t=new o(n);t.load(e),s.addMeasurement(s.JAVASCRIPT_INLINE_CREATE),a.resolve(t)}else s.addMeasurement(s.JAVASCRIPT_INLINE_CREATE),a.reject()}).fail(function(){s.addMeasurement(s.JAVASCRIPT_INLINE_CREATE),a.reject()})}else r(n).done(function(n){if(n&&n.length>0){var t=new o(n);t.load(e),s.addMeasurement(s.JAVASCRIPT_INLINE_CREATE),a.resolve(t)}else s.addMeasurement(s.JAVASCRIPT_INLINE_CREATE),a.reject()}).fail(function(){s.finalizeMeasurement(s.JAVASCRIPT_INLINE_CREATE),a.reject()})}).fail(function(){s.finalizeMeasurement(s.JAVASCRIPT_INLINE_CREATE),a.reject()}),a.promise()}function i(e){if("javascript"!==e.getModeForSelection())return null;var n=e.getSelection();if(n.start.line!==n.end.line)return null;var r=t(e,n.start);return r.functionName?a(e,r.functionName):r.reason||null}var o=brackets.getModule("editor/MultiRangeInlineEditor").MultiRangeInlineEditor,l=brackets.getModule("editor/EditorManager"),u=brackets.getModule("language/JSUtils"),c=brackets.getModule("language/LanguageManager"),s=brackets.getModule("utils/PerfUtils"),d=brackets.getModule("project/ProjectManager"),I=brackets.getModule("strings");l.registerInlineEditProvider(i),s.createPerfMeasurement("JAVASCRIPT_INLINE_CREATE","JavaScript Inline Editor Creation"),s.createPerfMeasurement("JAVASCRIPT_FIND_FUNCTION","JavaScript Find Function"),n.javaScriptFunctionProvider=i,n._createInlineEditor=a,n._findInProject=r});