define("text",["module"],function(e){var t,n,i,r,o,a=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],l=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,s=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,c="undefined"!=typeof location&&location.href,u=c&&location.protocol&&location.protocol.replace(/\:/,""),d=c&&location.hostname,f=c&&(location.port||void 0),g={},v=e.config&&e.config()||{};return t={version:"2.0.10",strip:function(e){if(e){e=e.replace(l,"");var t=e.match(s);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:v.createXhr||function(){var e,t,n;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(t=0;3>t;t+=1){n=a[t];try{e=new ActiveXObject(n)}catch(i){}if(e){a=[n];break}}return e},parseName:function(e){var t,n,i,r=!1,o=e.indexOf("."),a=0===e.indexOf("./")||0===e.indexOf("../");return-1!==o&&(!a||o>1)?(t=e.substring(0,o),n=e.substring(o+1,e.length)):t=e,i=n||t,o=i.indexOf("!"),-1!==o&&(r="strip"===i.substring(o+1),i=i.substring(0,o),n?n=i:t=i),{moduleName:t,ext:n,strip:r}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,n,i,r){var o,a,l,s=t.xdRegExp.exec(e);return s?(o=s[2],a=s[3],a=a.split(":"),l=a[1],a=a[0],!(o&&o!==n||a&&a.toLowerCase()!==i.toLowerCase()||(l||a)&&l!==r)):!0},finishLoad:function(e,n,i,r){i=n?t.strip(i):i,v.isBuild&&(g[e]=i),r(i)},load:function(e,n,i,r){if(r.isBuild&&!r.inlineText)return void i();v.isBuild=r.isBuild;var o=t.parseName(e),a=o.moduleName+(o.ext?"."+o.ext:""),l=n.toUrl(a),s=v.useXhr||t.useXhr;return 0===l.indexOf("empty:")?void i():void(!c||s(l,u,d,f)?t.get(l,function(n){t.finishLoad(e,o.strip,n,i)},function(e){i.error&&i.error(e)}):n([a],function(e){t.finishLoad(o.moduleName+"."+o.ext,o.strip,e,i)}))},write:function(e,n,i){if(g.hasOwnProperty(n)){var r=t.jsEscape(g[n]);i.asModule(e+"!"+n,"define(function () { return '"+r+"';});\n")}},writeFile:function(e,n,i,r,o){var a=t.parseName(n),l=a.ext?"."+a.ext:"",s=a.moduleName+l,c=i.toUrl(a.moduleName+l)+".js";t.load(s,i,function(){var n=function(e){return r(c,e)};n.asModule=function(e,t){return r.asModule(e,c,t)},t.write(e,s,n,o)},o)}},"node"===v.env||!v.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]?(n=require.nodeRequire("fs"),t.get=function(e,t,i){try{var r=n.readFileSync(e,"utf8");0===r.indexOf("ï»¿")&&(r=r.substring(1)),t(r)}catch(o){i(o)}}):"xhr"===v.env||!v.env&&t.createXhr()?t.get=function(e,n,i,r){var o,a=t.createXhr();if(a.open("GET",e,!0),r)for(o in r)r.hasOwnProperty(o)&&a.setRequestHeader(o.toLowerCase(),r[o]);v.onXhr&&v.onXhr(a,e),a.onreadystatechange=function(){var t,r;4===a.readyState&&(t=a.status,t>399&&600>t?(r=new Error(e+" HTTP status: "+t),r.xhr=a,i(r)):n(a.responseText),v.onXhrComplete&&v.onXhrComplete(a,e))},a.send(null)}:"rhino"===v.env||!v.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?t.get=function(e,t){var n,i,r="utf-8",o=new java.io.File(e),a=java.lang.System.getProperty("line.separator"),l=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(o),r)),s="";try{for(n=new java.lang.StringBuffer,i=l.readLine(),i&&i.length()&&65279===i.charAt(0)&&(i=i.substring(1)),null!==i&&n.append(i);null!==(i=l.readLine());)n.append(a),n.append(i);s=String(n.toString())}finally{l.close()}t(s)}:("xpconnect"===v.env||!v.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(i=Components.classes,r=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),o="@mozilla.org/windows-registry-key;1"in i,t.get=function(e,t){var n,a,l,s={};o&&(e=e.replace(/\//g,"\\")),l=new FileUtils.File(e);try{n=i["@mozilla.org/network/file-input-stream;1"].createInstance(r.nsIFileInputStream),n.init(l,1,0,!1),a=i["@mozilla.org/intl/converter-input-stream;1"].createInstance(r.nsIConverterInputStream),a.init(n,"utf-8",n.available(),r.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),a.readString(n.available(),s),a.close(),n.close(),t(s.value)}catch(c){throw new Error((l&&l.path||"")+": "+c)}}),t}),define("text!QuickViewTemplate.html",[],function(){return'<div id="quick-view-container">\n    <div class="preview-content">\n    </div>\n</div>'}),define("main",["require","exports","module","text!QuickViewTemplate.html"],function(e,t,n){function i(){H&&(H.visible?(H.marker.clear(),w.empty(),x.hide(),x.removeClass("active")):window.clearTimeout(H.hoverTimer),H=null)}function r(e,t,n,i){var r=x.outerWidth(),o=n-x.outerHeight()-F,a=t-r/2,l={top:o,left:a-N,height:x.outerHeight()+F,width:r+2*N},s=_.getElementClipSize($(e.getRootElement()),l);s.left>0?a+=s.left:s.right>0&&(a-=s.right),s.top>0?(o=i+F,x.removeClass("preview-bubble-above").addClass("preview-bubble-below")):x.removeClass("preview-bubble-below").addClass("preview-bubble-above"),x.css({left:a,top:o}).addClass("active")}function o(e,t){var n=e.offset();return t.clientX>=n.left&&t.clientX<=n.left+e.width()&&t.clientY>=n.top&&t.clientY<=n.top+e.height()}function a(e,t,n,i){function r(e){var t,n,i,r=0;for(n=E.reduceStyleSheetForRegExParsing(e),i=n.length,t=0;i>t;t++)switch(n[t]){case"(":r++;break;case")":r--;break;case"\\":t++}return 0===r}function o(e){var t,n=r(e)?d.exec(e):null,i="";return n&&(-1!==n[0].indexOf("@")?n=null:(n[0].match(/-o-|-moz-|-ms-|-webkit-/i)&&(i="-webkit-"),n[1]?t=n[1]+n[5]:n[3]?t=n[3]+n[5]:n[0]&&(t=n[0],i=""))),{match:n,prefix:i,colorValue:t}}function a(e,t,n){function i(e,t){var n,i;if(e){if(n=e.index-1,n>=0&&"-"===t[n])return!0;if(i=e.index+e[0].length,i<t.length&&"-"===t[i])return!0}return!1}function r(e){return e&&e[0]&&/^[a-z]+$/i.test(e[0])?!0:void 0}var o,a;do{if(o=f.exec(t),!o)break;if(void 0===a){var l=j.getModeAt(e._codeMirror,n).name;a=-1===q.indexOf(l)}}while(i(o,t)||a&&r(o));return o}function l(e){var t=/((?:[^"']|".*?"|'.*?')*?)([(,)]|$)/g,n=function(){for(var i=[];;){var r=t.exec(e);if("("===r[2]){var o=r[1].trim()+"("+n().join(",")+")";r=t.exec(e),o+=r[1],i.push(o)}else i.push(r[1].trim());if(","!==r[2])return i}};return n()}function s(e){return e.length>0&&null!==e[0].match(f)}function c(e){return e.length>1&&e[1].indexOf("px")>0}function u(e){if(e.indexOf("px")>0){var t,n,i,r=e.indexOf("(")+1,o=e.lastIndexOf(")"),a=e.substring(r,o),u=l(a),d=0,f=x.width();for(i=0;i<u.length;i++)t=u[i].split(" "),c(t)&&(n=parseFloat(t[1]),f=Math.max(f,n),0>n&&(d=Math.min(d,n)));for(d=Math.abs(d),f+=d,i=0;i<u.length;i++)t=u[i].split(" "),s(t)&&c(t)&&(n=0===f?0:(parseFloat(t[1])+d)/f*100,t[1]=n+"%"),u[i]=t.join(" ");e=e.substring(0,r)+u.join(", ")+e.substring(o)}return e}for(var d=/-webkit-gradient\((?:[^\(]*?(?:\((?:[^\(]*?(?:\([^\)]*?\))*?)*?\))*?)*?\)|(?:(?:-moz-|-ms-|-o-|-webkit-|:|\s)((repeating-)?linear-gradient)|(?:-moz-|-ms-|-o-|-webkit-|:|\s)((repeating-)?radial-gradient))(\((?:[^\)]*?(?:\([^\)]*?\))*?)*?\))/gi,f=new RegExp(y.COLOR_REGEX),g=o(i),v=g.match||a(e,i,t),p=e._codeMirror;v;){if(t.ch<v.index){if(!g.match)break;g={match:null,prefix:"",colorValue:null}}else if(t.ch<=v.index+v[0].length){var h=g.prefix+(g.colorValue||v[0]);h=u(h);var m,b="<div class='color-swatch' style='background:"+h+"'></div>",w={line:t.line,ch:v.index},M={line:t.line,ch:v.index+v[0].length},k=p.charCoords(w);return m=(p.charCoords(M).left-k.left)/2+k.left,{start:w,end:M,content:b,xpos:m,ytop:k.top,ybot:k.bottom,_previewCSS:h}}g.match&&(g=o(i)),v=g.match||a(e,i,t)}return null}function l(e,t,n,i){var o,a,l=e._codeMirror,s=/url\(([^\)]*)\)/gi;if("string"===n.type)o=n.string;else for(a=s.exec(i);a&&!(t.ch<a.index);){if(t.ch<=a.index+a[0].length){o=a[1];break}a=s.exec(i)}if(o&&(o=o.replace(/(^['"])|(['"]$)/g,""),/^(data\:image)|(\.gif|\.png|\.jpg|\.jpeg|\.svg)$/i.test(o))){var c,u,d,f=e.document.file.fullPath;if(d=PathUtils.isAbsoluteUrl(o)?o:"file:///"+X.getDirectoryPath(f)+o,a?(c={line:t.line,ch:a.index},u={line:t.line,ch:a.index+a[0].length}):(c={line:t.line,ch:n.start},u={line:t.line,ch:n.end}),d){var g="<div class='image-preview'>    <img src=\""+d+'"></div>',v=l.charCoords(c),p=(l.charCoords(u).left-v.left)/2+v.left,h=function(){x.hide(),x.find(".image-preview > img").on("load",function(){w.append("<div class='img-size'>"+this.naturalWidth+" &times; "+this.naturalHeight+" "+R.UNIT_PIXELS+"</div>"),x.show(),r(e,H.xpos,H.ytop,H.ybot)})};return{start:c,end:u,content:g,onShow:h,xpos:p,ytop:v.top,ybot:v.bottom,_imgPath:d}}}return null}function s(e,t,n){var i=e.document.getLine(t.line),r=a(e,t,n,i)||l(e,t,n,i);return r?(r.visible=!1,r.editor=e,r):null}function c(e){var t=L.getCurrentFullEditor();if(t&&e){var n,i,r=t.getInlineWidgets();for(n=0;n<r.length;n++){var a=r[n].editor&&$(r[n].editor.getRootElement()),l=r[n].$htmlContent;if(a&&o(a,e)){i=r[n].editor;break}if(l&&o(l,e))return}return i||o($(t.getRootElement()),e)&&(i=t),i}}function u(e,t){var n,o;if(e||(e=c(M)),!e||!e._codeMirror)return void i();o=e._codeMirror;var a=o.coordsChar({left:M.clientX,top:M.clientY});a.ch>=e.document.getLine(a.line).length||(t?H=t:(n=o.getTokenAt(a,!0),H=$.extend({},H,s(e,a,n))),H&&H.start&&H.end&&(H.marker=o.markText(H.start,H.end,{className:"quick-view-highlight"}),w.append(H.content),x.show(),H.visible=!0,H.onShow?H.onShow():r(e,H.xpos,H.ytop,H.ybot)))}function d(){if(k=null,M){var e=!1,t=null;if(H&&H.visible){if(t=c(M),t&&t._codeMirror){var n=t._codeMirror,r=n.coordsChar({left:M.clientX,top:M.clientY});if(H.start&&H.end&&t.posWithinRange(r,H.start,H.end,!0)&&r.ch<t.document.getLine(r.line).length)return}e=!0}i(),H={},H.hoverTimer=window.setTimeout(function(){u(t)},e?0:A)}}function f(e){if(M=null,b){if(e.which)return void i();M={clientX:e.clientX,clientY:e.clientY},k||(k=window.requestAnimationFrame(d))}}function g(e,t,n){i(),n&&n.document&&$(n.document).off("change",i),t&&t.document&&$(t.document).on("change",i)}function v(){C.get(U).setChecked(b)}function p(e,t){if(b!==e){b=e;var n=$("#editor-holder")[0];b?(n.addEventListener("mousemove",f,!0),n.addEventListener("scroll",i,!0),n.addEventListener("mouseout",i,!0),g(null,L.getActiveEditor(),null),$(L).on("activeEditorChange",g)):(n.removeEventListener("mousemove",f,!0),n.removeEventListener("scroll",i,!0),n.removeEventListener("mouseout",i,!0),g(null,null,L.getActiveEditor()),$(L).off("activeEditorChange",g),i()),t||(O.set("enabled",b),O.save())}v()}function h(){p(!b)}function m(e){i(),M={clientX:e.xpos,clientY:Math.floor((e.ybot+e.ytop)/2)},u(e.editor,e)}var b,x,w,M,k,y=brackets.getModule("utils/ColorUtils"),C=brackets.getModule("command/CommandManager"),E=brackets.getModule("language/CSSUtils"),L=brackets.getModule("editor/EditorManager"),S=brackets.getModule("utils/ExtensionUtils"),X=brackets.getModule("file/FileUtils"),T=brackets.getModule("command/Menus"),P=brackets.getModule("preferences/PreferencesManager"),R=brackets.getModule("strings"),_=brackets.getModule("utils/ViewUtils"),j=brackets.getModule("utils/TokenUtils"),I=e("text!QuickViewTemplate.html"),O=null,U="view.enableQuickView",A=350,F=15,N=5,q=["css","text/x-less","sass","text/x-scss"];O=P.getExtensionPrefs("quickview"),O.definePreference("enabled","boolean",!0);var H=null;x=$(I).appendTo($("body")),w=x.find(".preview-content"),S.loadStyleSheet(n,"QuickView.less"),C.register(R.CMD_ENABLE_QUICK_VIEW,U,h),T.getMenu(T.AppMenuBar.VIEW_MENU).addMenuItem(U),P.convertPreferences(n,{enabled:"user quickview.enabled"}),p(O.get("enabled"),!0),O.on("change","enabled",function(){p(O.get("enabled"),!0)}),t._queryPreviewProviders=s,t._forceShow=m});